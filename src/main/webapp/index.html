<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>帆帆大药房 - 你的家庭药师</title>
    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">

    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>

    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link href="css/init.css" rel="stylesheet">
    <link href="font/iconfont.css" rel="stylesheet">
    <link href="css/thisWeb.css" rel="stylesheet">
    <link href="css/css_index.css" rel="stylesheet">
    <script>
        function scrollBottom() {
            let tops = document.getElementsByClassName('return_top')[0];
            let clients = window.innerHeight;
            let scrollTop = document.documentElement.scrollTop;
            let wholeTop = document.documentElement.scrollHeight;
            if (clients + scrollTop >= wholeTop / 1.1) {
                tops.style.transform = "scale(1.2)";
            } else {
                tops.style.transform = "";
            }
        }

        window.onscroll = scrollBottom;
    </script>
</head>
<body>
<header class="header">
    <nav class="top_bar">
        <img alt="" class="logo" src="img/logo.png">
        <ul class="top_nav_bar">
            <li>首页</li>
            <li>药库</li>
            <li>家庭常备</li>
        </ul>
        <a class="new_user" data-target="#registerModal" data-toggle="modal" style="cursor: pointer;">新用户注册</a>
        <a class="new_user" data-target="#loginModal" data-toggle="modal" style="margin-right: 30px; cursor: pointer;">用户登录</a>
        <button class="user_notice iconfont icon-lingdang" data-container="body"
                data-content="暂无通知" data-placement="bottom" data-toggle="popover"
                title="通知">
        </button>
        <div class="search">
            <input class="ser_text" id="ser_text" name="ser_text" type="text">
            <button class="iconfont icon-sousuo ser_but" id="ser_but" name="ser_button" type="submit"></button>
        </div>
    </nav>
</header>
<div class="banner">
    <div class="ban_body">
        <img alt="" class="img_ban" src="img/sale_ad.png">
        <ul class="sub_nav">
            <li><a href="">药品类别<span>&gtcir;</span></a></li>
            <li><a href="">药品类别<span>&gtcir;</span></a></li>
            <li><a href="">药品类别<span>&gtcir;</span></a></li>
            <li><a href="">药品类别<span>&gtcir;</span></a></li>
            <li><a href="">药品类别<span>&gtcir;</span></a></li>
            <li><a href="">药品类别<span>&gtcir;</span></a></li>
            <li><a href="">药品类别<span>&gtcir;</span></a></li>
            <li><a href="">药品类别<span>&gtcir;</span></a></li>
        </ul>
        <ul class="nav_dot">
            <li class="li_dot checked_dot"></li>
            <li class="li_dot"></li>
            <li class="li_dot"></li>
            <li class="li_dot"></li>
            <li class="li_dot"></li>
        </ul>
        <script>
            let dots = document.getElementsByClassName('li_dot');
            for (let j = 0; j < 5; j++) {
                dots[j].onmouseenter = function () {
                    for (let i = 0; i < 5; i++) {
                        dots[i].className = 'li_dot';
                    }
                    dots[j].className += " checked_dot";
                }
            }
        </script>
        <div class="my_drug">
            <h2 class="md_title">我的药箱</h2>
            <ul class="md_body">
                <li><h4>药品名称</h4>
                    <p>药品数量</p></li>
                <li><h4>药品名称</h4>
                    <p>药品数量</p></li>
                <li><h4>药品名称</h4>
                    <p>药品数量</p></li>
            </ul>
            <a class="cou_footer" href="">全部药品</a>
        </div>
    </div>
</div>
<div class="main_body">
    <div class="drugs_feature">
        <h3 class="feature_title">药品推荐</h3>
        <ul class="drugs_list">
            <li><a href="">药品名称</a></li>
            <li><a href="">药品名称</a></li>
            <li><a href="">药品名称</a></li>
            <li><a href="">药品名称</a></li>
            <li><a href="">药品名称</a></li>
        </ul>
        <a class="change_symptom" href="javascript:alert('别改了，')">修改症状</a>
    </div>
    <h3 class="feature_title" style="color: #555;margin-top: 10px;">热销药品Top10</h3>
    <span class="look_more">查看全部</span>
    <ul class="clear hot_drug_item">
        <li>
            <img alt="" src="img/pic.png">
            <div class="new_hot_course hot_course"></div>
            <div class="item_body">
                <a href="">参天地夸磷索钠滴眼液</a>
                <span class="course_status">眼药水</span>
                <span class="bought_count"><span>9999+</span>人已购</span>
            </div>
        </li>
        <li>
            <img alt="" src="img/pic.png">
            <div class="new_hot_course hot_course"></div>
            <div class="item_body">
                <a href="">参天地夸磷索钠滴眼液</a>
                <span class="course_status">眼药水</span>
                <span class="bought_count"><span>9999+</span>人已购</span>
            </div>
        </li>
        <li>
            <img alt="" src="img/pic.png">
            <div class="new_hot_course new_course"></div>
            <div class="item_body">
                <a href="">参天地夸磷索钠滴眼液</a>
                <span class="course_status">眼药水</span>
                <span class="bought_count"><span>9999+</span>人已购</span>
            </div>
        </li>
        <li>
            <img alt="" src="img/pic.png">
            <div class="item_body">
                <a href="">参天地夸磷索钠滴眼液</a>
                <span class="course_status">眼药水</span>
                <span class="bought_count"><span>9999+</span>人已购</span>
            </div>
        </li>
        <li>
            <img alt="" src="img/pic.png">
            <div class="item_body">
                <a href="">参天地夸磷索钠滴眼液</a>
                <span class="course_status">眼药水</span>
                <span class="bought_count"><span>9999+</span>人已购</span>
            </div>
        </li>
        <li>
            <img alt="" src="img/pic.png">
            <div class="item_body">
                <a href="">参天地夸磷索钠滴眼液</a>
                <span class="course_status">眼药水</span><span class="bought_count"><span>9999+</span>人已购</span>
            </div>
        </li>
        <li>
            <img alt="" src="img/pic.png">
            <div class="item_body">
                <a href="">参天地夸磷索钠滴眼液</a>
                <span class="course_status">眼药水</span>
                <span class="bought_count"><span>9999+</span>人已购</span>
            </div>
        </li>
        <li>
            <img alt="" src="img/pic.png">
            <div class="item_body">
                <a href="">参天地夸磷索钠滴眼液</a>
                <span class="course_status">眼药水</span>
                <span class="bought_count"><span>9999+</span>人已购</span>
            </div>
        </li>
        <li>
            <img alt="" src="img/pic.png">
            <div class="item_body">
                <a href="">参天地夸磷索钠滴眼液</a>
                <span class="course_status">眼药水</span>
                <span class="bought_count"><span>9999+</span>人已购</span>
            </div>
        </li>
        <li>
            <img alt="" src="img/pic.png">
            <div class="item_body">
                <a href="">参天地夸磷索钠滴眼液</a>
                <span class="course_status">眼药水</span>
                <span class="bought_count"><span>9999+</span>人已购</span>
            </div>
        </li>
    </ul>
</div>
<div class="clear_footer clear">
    <div class="footer">
        <div class="foot_main">
            <div class="foot_left">
                <img alt="" class="logo" src="img/logo.png" style="float: none;display: block; margin: 0 auto;">
                <p class="cr">帆帆售药<br>
                    2022年 2fanbaby保留所有权利。-豫ICP备2021025365号</p>
                <a class="down_app" href="">下载APP</a>
            </div>
            <div class="foot_right">
                <ul class="Links">
                    关于药品
                    <li><a href="">关于</a></li>
                    <li><a href="">关于</a></li>
                    <li><a href="">关于</a></li>
                    <li><a href="">关于</a></li>
                    <li><a href="">关于</a></li>
                </ul>
                <ul class="Links">
                    关于药品
                    <li><a href="">关于</a></li>
                    <li><a href="">关于</a></li>
                    <li><a href="">关于</a></li>
                    <li><a href="">关于</a></li>
                    <li><a href="">关于</a></li>
                </ul>
                <ul class="Links">
                    关于药品
                    <li><a href="">关于</a></li>
                    <li><a href="">关于</a></li>
                    <li><a href="">关于</a></li>
                    <li><a href="">关于</a></li>
                    <li><a href="">关于</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>
<div aria-hidden="true" aria-labelledby="myModalLabel" class="modal fade" id="loginModal" role="dialog"
     tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button aria-hidden="true" class="close" data-dismiss="modal" type="button">
                    &times;
                </button>
                <h4 class="modal-title" id="myModalLabel">
                    用户登录
                </h4>
            </div>
            <div class="modal-body">
                <form action="../LoginCheck" method="post" role="form">
                    <div class="form-group">
                        <label for="user">用户名</label>
                        <input class="form-control" id="user" name="user" placeholder="请输入用户名" type="text">
                    </div>
                    <div class="form-group">
                        <label for="pwd">密码</label>
                        <input class="form-control" id="pwd" name="pwd" placeholder="请输入密码" type="password">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-default" data-dismiss="modal" type="button">关闭</button>
                <script>
                    function login() {
                        let oUser = document.querySelector("#user").value;
                        let oPwd = document.querySelector("#pwd").value;
                        const httpRequest = new XMLHttpRequest();//第一步：创建需要的对象
                        httpRequest.open('POST', './LoginCheck', true); //第二步：打开连接
                        httpRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");//设置请求头 注：post方式必须设置请求头（在建立连接后设置请求头）
                        httpRequest.send('user=' + oUser + '&pwd=' + oPwd);//发送请求 将情头体写在send中
                        /**
                         * 获取数据后的处理程序
                         */
                        httpRequest.onreadystatechange = function () {//请求后的回调接口，可将请求成功后要执行的程序写在其中
                            if (httpRequest.readyState === 4 && httpRequest.status === 200) {//验证请求是否发送成功
                                let json = httpRequest.responseText;//获取到服务端返回的数据
                                console.log(json);
                                if (json) {
                                    alert(oUser + ', 欢迎你！');
                                    document.querySelector("#loginModal > div > div > div.modal-footer > button.btn.btn-default").click();
                                    document.querySelector("body > header > nav > a:nth-child(4)").innerHTML = oUser;
                                } else {
                                    alert("用户名或密码错误！");
                                }
                            }
                        };
                    }
                </script>
                <button class="btn btn-primary" id="btn_login_submit" onclick="login()" type="button">
                    登录
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>
<div aria-hidden="true" aria-labelledby="myModalLabel" class="modal fade" id="registerModal" role="dialog"
     tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button aria-hidden="true" class="close" data-dismiss="modal" type="button">
                    &times;
                </button>
                <h4 class="modal-title" id="registerModalLabel">
                    用户登录
                </h4>
            </div>
            <div class="modal-body">
                <form action="../LoginCheck" method="post" role="form">
                    <div class="form-group">
                        <label for="reg_user">用户名</label>
                        <input class="form-control" id="reg_user" name="user" placeholder="请输入用户名" type="text">
                    </div>
                    <div class="form-group">
                        <label for="reg_pwd">密码</label>
                        <input class="form-control" id="reg_pwd" name="pwd" placeholder="请输入密码" type="password">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-default" data-dismiss="modal" type="button">关闭</button>
                <script>
                    function reg() {
                        let oUser = document.querySelector("#reg_user").value;
                        let oPwd = document.querySelector("#reg_pwd").value;
                        const httpRequest = new XMLHttpRequest();//第一步：创建需要的对象
                        httpRequest.open('POST', './Register', true); //第二步：打开连接
                        httpRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");//设置请求头 注：post方式必须设置请求头（在建立连接后设置请求头）
                        httpRequest.send('user=' + oUser + '&pwd=' + oPwd);//发送请求 将情头体写在send中
                        /**
                         * 获取数据后的处理程序
                         */
                        httpRequest.onreadystatechange = function () {//请求后的回调接口，可将请求成功后要执行的程序写在其中
                            if (httpRequest.readyState === 4 && httpRequest.status === 200) {//验证请求是否发送成功
                                let json = httpRequest.responseText;//获取到服务端返回的数据
                                console.log(json);
                                if (json) {
                                    alert(oUser + ', 注册成功！');
                                    document.querySelector("#registerModal > div > div > div.modal-footer > button.btn.btn-default").click();
                                } else {
                                    alert("注册失败！");
                                }
                            }
                        };
                    }
                </script>
                <button class="btn btn-primary" id="btn_reg_submit" onclick="reg()" type="button">
                    注册
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>
<a class="return_top iconfont icon-fanhuidingbu" href="#" onclick="scroll(0,0)" title="点击返回顶部"></a>
<script>
    $(function () {
        $("[data-toggle='popover']").popover();
    })
</script>
</body>
</html>