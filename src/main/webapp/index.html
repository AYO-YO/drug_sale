<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>帆帆大药房 - 你的家庭药师</title>
    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link href="https://cdn.staticfile.org/twitter-bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">

    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="https://cdn.staticfile.org/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/5.1.3/js/bootstrap.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/5.1.3/js/bootstrap.bundle.js"></script>
    <link href="css/init.css" rel="stylesheet">
    <link href="font/iconfont.css" rel="stylesheet">
    <link href="css/thisWeb.css" rel="stylesheet">
    <link href="css/css_index.css" rel="stylesheet">
    <script>
        function scrollBottom() {
            let tops = document.getElementsByClassName('return_top')[0];
            let clients = window.innerHeight;
            let scrollTop = document.documentElement.scrollTop;
            let wholeTop = document.documentElement.scrollHeight;
            if (clients + scrollTop >= wholeTop / 1.1) {
                tops.style.transform = "scale(1.2)";
            } else {
                tops.style.transform = "";
            }
        }

        window.onscroll = scrollBottom;
    </script>
</head>
<body>
<header id="headerContent"></header>
<div class="banner">
    <div class="ban_body">
        <img alt="" class="img_ban" src="img/sale_ad.png">
        <ul class="sub_nav">
            <li><a href="">药品类别<span>&gtcir;</span></a></li>
            <li><a href="">药品类别<span>&gtcir;</span></a></li>
            <li><a href="">药品类别<span>&gtcir;</span></a></li>
            <li><a href="">药品类别<span>&gtcir;</span></a></li>
            <li><a href="">药品类别<span>&gtcir;</span></a></li>
            <li><a href="">药品类别<span>&gtcir;</span></a></li>
            <li><a href="">药品类别<span>&gtcir;</span></a></li>
            <li><a href="">药品类别<span>&gtcir;</span></a></li>
        </ul>
        <ul class="nav_dot">
            <li class="li_dot checked_dot"></li>
            <li class="li_dot"></li>
            <li class="li_dot"></li>
            <li class="li_dot"></li>
            <li class="li_dot"></li>
        </ul>
        <script>
            let dots = document.getElementsByClassName('li_dot');
            for (let j = 0; j < 5; j++) {
                dots[j].onmouseenter = function () {
                    for (let i = 0; i < 5; i++) {
                        dots[i].className = 'li_dot';
                    }
                    dots[j].className += " checked_dot";
                }
            }
        </script>
    </div>
</div>
<div class="main_body">
    <h3 class="feature_title" style="color: #555;margin-top: 10px;">热销药品Top10</h3>
    <span class="look_more">查看全部</span>
    <ul class="clear hot_drug_item">
        <li>
            <img alt="" src="img/pic.png">
            <div class="new_hot_course hot_course"></div>
            <div class="item_body">
                <a href="">参天地夸磷索钠滴眼液</a>
                <span class="course_status">眼药水</span>
                <span class="bought_count"><span>9999+</span>人已购</span>
            </div>
        </li>
        <li>
            <img alt="" src="img/pic.png">
            <div class="new_hot_course hot_course"></div>
            <div class="item_body">
                <a href="">参天地夸磷索钠滴眼液</a>
                <span class="course_status">眼药水</span>
                <span class="bought_count"><span>9999+</span>人已购</span>
            </div>
        </li>
        <li>
            <img alt="" src="img/pic.png">
            <div class="new_hot_course new_course"></div>
            <div class="item_body">
                <a href="">参天地夸磷索钠滴眼液</a>
                <span class="course_status">眼药水</span>
                <span class="bought_count"><span>9999+</span>人已购</span>
            </div>
        </li>
        <li>
            <img alt="" src="img/pic.png">
            <div class="item_body">
                <a href="">参天地夸磷索钠滴眼液</a>
                <span class="course_status">眼药水</span>
                <span class="bought_count"><span>9999+</span>人已购</span>
            </div>
        </li>
        <li>
            <img alt="" src="img/pic.png">
            <div class="item_body">
                <a href="">参天地夸磷索钠滴眼液</a>
                <span class="course_status">眼药水</span>
                <span class="bought_count"><span>9999+</span>人已购</span>
            </div>
        </li>
        <li>
            <img alt="" src="img/pic.png">
            <div class="item_body">
                <a href="">参天地夸磷索钠滴眼液</a>
                <span class="course_status">眼药水</span><span class="bought_count"><span>9999+</span>人已购</span>
            </div>
        </li>
        <li>
            <img alt="" src="img/pic.png">
            <div class="item_body">
                <a href="">参天地夸磷索钠滴眼液</a>
                <span class="course_status">眼药水</span>
                <span class="bought_count"><span>9999+</span>人已购</span>
            </div>
        </li>
        <li>
            <img alt="" src="img/pic.png">
            <div class="item_body">
                <a href="">参天地夸磷索钠滴眼液</a>
                <span class="course_status">眼药水</span>
                <span class="bought_count"><span>9999+</span>人已购</span>
            </div>
        </li>
        <li>
            <img alt="" src="img/pic.png">
            <div class="item_body">
                <a href="">参天地夸磷索钠滴眼液</a>
                <span class="course_status">眼药水</span>
                <span class="bought_count"><span>9999+</span>人已购</span>
            </div>
        </li>
        <li>
            <img alt="" src="img/pic.png">
            <div class="item_body">
                <a href="">参天地夸磷索钠滴眼液</a>
                <span class="course_status">眼药水</span>
                <span class="bought_count"><span>9999+</span>人已购</span>
            </div>
        </li>
    </ul>
</div>
<footer id="footerContent"></footer>
<div aria-hidden="true" aria-labelledby="myModalLabel" class="modal fade" id="loginModal" role="dialog"
     tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myModalLabel">
                    用户登录
                </h4>
                <button aria-hidden="true" class="close" data-bs-dismiss="modal" type="button">
                    &times;
                </button>
            </div>
            <div class="modal-body">
                <form action="../LoginCheck" method="post" role="form">
                    <div class="mb-3">
                        <label class="form-label" for="user">用户名</label>
                        <input class="form-control" id="user" name="user" placeholder="请输入用户名" type="text">
                    </div>
                    <div class="mb-3">
                        <label class="form-label" for="pwd">密码</label>
                        <input class="form-control" id="pwd" name="pwd" placeholder="请输入密码" type="password">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-bs-dismiss="modal" type="button">关闭</button>
                <script>
                    function login() {
                        let oUser = document.querySelector("#user").value;
                        let oPwd = document.querySelector("#pwd").value;
                        let oMyDrug = document.querySelector('#my_drug_btn');
                        const httpRequest = new XMLHttpRequest();//第一步：创建需要的对象
                        httpRequest.open('POST', './LoginCheck', true); //第二步：打开连接
                        httpRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");//设置请求头 注：post方式必须设置请求头（在建立连接后设置请求头）
                        httpRequest.send('user=' + oUser + '&pwd=' + oPwd);//发送请求 将情头体写在send中
                        /**
                         * 获取数据后的处理程序
                         */
                        httpRequest.onreadystatechange = function () {//请求后的回调接口，可将请求成功后要执行的程序写在其中
                            if (httpRequest.readyState === 4 && httpRequest.status === 200) {//验证请求是否发送成功
                                let json = httpRequest.responseText;//获取到服务端返回的数据
                                console.log(json);
                                if (json) {
                                    alert(oUser + ', 欢迎你！');
                                    document.querySelector("#loginModal > div > div > div.modal-footer > button.btn.btn-secondary").click();
                                    document.querySelector("body > header > nav > a:nth-child(4)").innerHTML = oUser;
                                    oMyDrug.style.display = '';
                                } else {
                                    alert("用户名或密码错误！");
                                }
                            }
                        };
                    }
                </script>
                <button class="btn btn-primary" id="btn_login_submit" onclick="login()" type="button">
                    登录
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>
<div aria-hidden="true" aria-labelledby="myModalLabel" class="modal fade" id="registerModal" role="dialog"
     tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="registerModalLabel">
                    用户注册
                </h4>
                <button aria-label="Close" class="close" data-bs-dismiss="modal" type="button">
                    &times;
                </button>
            </div>
            <div class="modal-body">
                <form action="../LoginCheck" method="post" role="form">
                    <div class="mb-3">
                        <label class="form-label" for="reg_user">用户名</label>
                        <input class="form-control" id="reg_user" name="user" placeholder="请输入用户名" type="text">
                    </div>
                    <div class="mb-3">
                        <label class="form-label" for="reg_pwd">密码</label>
                        <input class="form-control" id="reg_pwd" name="pwd" placeholder="请输入密码" type="password">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-bs-dismiss="modal" type="button">关闭</button>
                <script>
                    function reg() {
                        let oUser = document.querySelector("#reg_user").value;
                        let oPwd = document.querySelector("#reg_pwd").value;
                        const httpRequest = new XMLHttpRequest();//第一步：创建需要的对象
                        httpRequest.open('POST', './Register', true); //第二步：打开连接
                        httpRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");//设置请求头 注：post方式必须设置请求头（在建立连接后设置请求头）
                        httpRequest.send('user=' + oUser + '&pwd=' + oPwd);//发送请求 将情头体写在send中
                        /**
                         * 获取数据后的处理程序
                         */
                        httpRequest.onreadystatechange = function () {//请求后的回调接口，可将请求成功后要执行的程序写在其中
                            if (httpRequest.readyState === 4 && httpRequest.status === 200) {//验证请求是否发送成功
                                let json = httpRequest.responseText;//获取到服务端返回的数据
                                console.log(json);
                                if (json) {
                                    alert(oUser + ', 注册成功！');
                                    document.querySelector("#registerModal > div > div > div.modal-footer > button.btn.btn-secondary").click();
                                } else {
                                    alert("注册失败！");
                                }
                            }
                        };
                    }
                </script>
                <button class="btn btn-primary" id="btn_reg_submit" onclick="reg()" type="button">
                    注册
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>
<a class="return_top iconfont icon-fanhuidingbu" href="#" onclick="scroll(0,0)" title="点击返回顶部"></a>
</body>
<script>
    $(document).ready(function () {
        $("#headerContent").load("common/header.html");
        $("#footerContent").load("common/footer.html");
    });
</script>
</html>